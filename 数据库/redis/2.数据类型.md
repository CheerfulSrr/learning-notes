- [语法通用规则](#语法通用规则)
- [Keys](#keys)
  - [基本命令](#基本命令)
- [Strings](#strings)
  - [基本命令](#基本命令-1)
- [Lists](#lists)
  - [基本命令](#基本命令-2)
- [Hashes](#hashes)
  - [基本命令](#基本命令-3)
- [Sets](#sets)
  - [基本命令](#基本命令-4)
- [Sorted sets](#sorted-sets)
  - [基本规则](#基本规则)
  - [基本命令](#基本命令-5)
- [Streams](#streams)
- [Pub/Sub](#pubsub)
- [Geo](#geo)
- [HyperLogLog](#hyperloglog)
- [Connection](#connection)
- [Server](#server)
- [Cluster](#cluster)
# 语法通用规则
1. `min/max`有默认的替代符, 分别表示最小值/最大值
   * `-/+`: 有些命令可以使用此符号替代, 如`ZLEXCOUNT`
   * `-inf/+inf`: 有些命令可以使用此符号替代, 如`ZRANGEBYSCORE`
2. 指定`min/max`时, 必须使用`[`或`(`指定区间
   * `[`开区间
   * `(`闭区间
3. `...`: 表示此参数可以接收多个
# Keys
## 基本命令
1. `KEYS pattern`: 根据`pattern`匹配`key`
2. `RENAME key newKey`: 重命名`key`, 如果`newKey`已存在则覆盖
3. `DEL key...`: 删除`key`
4. 序列化与反序列化
   * `DUMP key`: 序列化给定`key`, 返回序列化的值`serialized-value`
   * `RESTORE key ttl serialized-value [replace]`: 
5. `EXIST key`: 判断`key`是否存在
6. 生命周期
   * `EXPIRE key seconds`: 设置过期时间
   * `PEXPIRE key milliseconds`: 使用毫秒设置过期时间
   * `EXPIREAT key timestamp`: 使用`unix`时间戳设置过期时间
   * `PEXPIREAT key milliseconds-timestamp`: 使用毫秒的`unix`时间戳设置过期时间
   * `PERSIST key`: 移除过期时间
   * `TTL key`: 查看过期时间
   * `PTTL key`: 查看毫秒单位的过期时间
7. `RANDOMKEY`: 随机返回一个`key`
# Strings
## 基本命令
1. `APPEND key value`: 将`value`追加至`key`的末尾, 返回`key`的长度
2. 位运算
   * `SETBIT key offset value`: 设置或清空`value`在`offset`处的`bit`值
   * `GETBIT key offset`: 返回`offset`处的`bit`值
   * `BITCOUNT key [start end)`: 返回`start`与`end`位置之间为1的数量
   * `BITOP operation destKey key...`: 
     * 将`key...`使用`operation`方法操作二进制, 结果放入`destKey`中
     * `operation`: `AND`, `OR`, `NOT`, `XOR`
   * `BITPOS key bit [start] [end]`: 返回字符串中第一个值为`bit`的位置
3. 读写
   * `SET key value [EX seconds] [PX milliseconds] [NX|XX]`:
     * 为`key`设置一个`value`
     * `EX`: 设置过期时间
     * `PX`: 设置毫秒过期时间
     * `NX`: 当`key`不存在时赋值
     * `XX`: 当`key`存在时赋值
   * `SETRANGE key offset value`: 在`offset`处为`key`设置新的`value`
   * `MSET key value [key value]...`: 批量赋值
   * `GET key`: 返回值
   * `GETRANGE key start end`: 返回子串
   * `MGET key...`: 批量取值
   * `GETSET key newValue`: 为`key`设置`newValue`, 并返回原来`key`的值, 如果原来的值不是字符串则报错
   * `STRLEN key`: 返回长度
4. 自增减运算
   * `INCR key`: 将值原子增加1, 执行时自动将值解析为10进制的64位有符号整型
   * `INCRBY key increment`: 将值增加`increment`
   * `INCRFLOAT key increment`: 将值增加`increment`, `increment`为浮点数, 输出精度为小数点后17位
   * `DECR key`: 将值减1
   * `DECRBY key increment`: 将值减去`increment`
# Lists
## 基本命令
1. 入队
   * `LPUSH key value...`: 在列表头部(左端)依次插入
   * `LPSUHX key value`: 当`key`存在时插入 
   * `RPUSH key value...`: 在列表尾部(右端)依次插入
   * `RPUSHX key value`: 当`key`存在时插入 
2. 索引入队
   * `LSET key index value`: 设置`index`位置元素的值为`value`
   * `LINSERT key BEFORE|AFTER pivot value`: 将`value`插入至`pivot`的前边(`BEFORE`)或后边(`AFTER`)
3. 出队
   * `LPOP key`: 移除`key`头部(左端)第一个元素
   * `RPOP key`: 移除`key`尾部(右端)第一个元素
   * `RPOPLPUSH source destination`: 原子性的返回并移除`source`尾部(右端)第一个元素, 并将该元素放入`destination`头部(左端)
4. 阻塞式出队
   * `BLPOP key... timeout`:
     * 当列表中没有元素可以出队时, 在`timeout`时间内阻塞客户端. 直到`timeout`为0或者列表中出现可以出队的元素
     * 当给定多个`key`时, 按照`key`的先后顺序出队头部(左端)元素
     * `LPOP`的阻塞版本
   * `BRPOP key... timeout`: `BLPOP`的阻塞版本
   * `BRPOPLPUSH source destination timeout`: `RPOPLPUSH`的阻塞版本
5. 查询及修改
   * `LINDEX key index`: 返回`index`位置的元素
   * `LRANGE key start end`: 
     * 返回范围内列表中的值
     * 左右闭区间
   * `LLEN key`: 返回长度
   * `LREM key count value`: 
     * 移除`value`出现的次数大于`count`的元素
     * `count > 0`: 从头部(左端)开始移除
     * `count < 0`: 从尾部(右端)开始移除
     * `count = 0`: 移除所有值为`value`的元素
   * `LTRIM key start stop`: 
     * 保留`start`至`stop`范围内的元素
     * 左右闭区间
# Hashes
## 基本命令
1. 赋值
   * `HSET key field value`: 设置`key`指定的哈希集中指定字段的值
   * `HSETNX key field value`: 若`key`存在时, 则赋值失败
   * `HMSET key [field value]...`: 对多个`field`赋值
2. 查询键与值
   * `HGET key field`: 返回`field`关联的值
   * `HETALL key`: 返回所有`field`与`value`
   * `HVALS key`: 返回所有`field`
   * `HKEYS key`: 返回所有`field`
   * `HEXISTS key field`: 返回`field`是否存在
   * `HSCAN key cursor [MATCH pattern] [COUNT count]`: 参考`SCAN`
3. 自增
   * `HINCRBY key field increment`: 为`field`的值增加`increment`
   * `HINCRBYFLOAT key field increment`: 为`field`的值增加`increment`
4. `HDEL key field [field ...]`: 删除指定的`field`
5. `HSTRLEN key field`: 返回指定`field`的值的长度
# Sets
## 基本命令
1. 添加
   * `SADD key member [member ...]`: 向指定的`key`添加元素
2. 删除
   * `SPOP key [count]`: 从`key`中移除`count`个随机元素
   * `SREM key member [member]...`: 从`key`中移除指定元素
3. 查询
   * `SCARD key`: 返回`key`的数量
   * `SRANDMEMBER key [count]`: 
     * 随机返回元素
     * 当`count > 0` & `count > SCARD key`时, 返回全部元素
     * 当`count > 0` & `count < SCARD key`时, 返回`count`个元素
     * 当`count < 0` & `|count| > SCARD key`时, 返回`count`个元素, 会出现元素重复的情况
     * 当`count < 0` & `|count| < SCARD key`时, 返回`count`个元素
   * `SMOVE source destination member`: 
     * 将指定元素从`source`移动至`destination`
     * 如果`source`中不存在`member`, 则什么都没发生
     * 如果`destination`中已存在`member`, 则仅从`source`中删除`member`
4. 集合操作
   * `SDIFF key [key ...]`: 返回给定集合的差集
   * `SINTER key [key]...`: 返回给定集合的交集
   * `SUNION key [key ...]`: 返回给定集合的并集
   * `SISMEMBER key member`: 返回`member`是否在给定的集合中
   * `SMEMBERS key`: 返回给定集合所有的元素
   * `SDIFFSTORE destination key [key ...]`: 返回给定集合的差集至`destination`中
   * `SINTERSTORE destination key [key ...]`: 返回给定集合的交集至`destination`中
   * `SUNIONSTORE destination key [key ...]`: 返回给定集合的并集至`destination`中
5. `SSCAN`: 参考`SCAN`
# Sorted sets
## 基本规则
1. 与`LEX`相关的命令使用`-/+`替代`min/max`
2. 与`SCORE`相关的命令使用`-inf/+inf`替代`min/max`
3. `WITHSCORES`可以将`SCORE`一起返回
4. 与`RANK`相关的命令, 通过`score`进行排名
5. 与`RANGE`相关的命令, 通过`memer`的`a-z`顺序进行排名
6. 与`SCORE`相关的命令, 通过`score`的大小进行排名
## 基本命令
1. 添加
   * `ZADD key [NX|XX] [CH] [INCR] score member [score member]...`:
     * 添加`score`与`number`到指定`key`中
     * `NX`: 只添加新成员, 不更新已存在的成员
     * `XX`: 只更新已存在的成员, 不更新新成员
     * `CH`: 
     * `INCR`: 对成员分数进行递增
2. 固定删除
   * `ZPOPMAX key [count]`: 删除并返回`count`个`score`最高的`member`, `count`默认为1
   * `BZPOPMAX key [key]... timeout`: 阻塞版本的`ZPOPMAX`
   * `ZPOPMIN key [count]`: 删除并返回`count`个`score`最低的`member`, `count`默认为1
   * `BZPOPMIN key [key]... timeout`: 阻塞版本的`ZPOPMIN`
   * `ZREM key member [member]...`: 删除指定的`member`
3. 范围删除
   * `ZREMRANGEBYRANK key start stop`: 
     * 删除按照`score`排名的`member`
   * `ZREMRANGEBYLEX key min max`: 
     * 删除按照`member`从低到高排序的所有成员
     * `min/max`的范围为字母`a-z`
   * `ZREMRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]`: 
     * 删除按照`score`从低到高排序的所有成员
4. 自增
   * `ZINCRBY key increment member`: 为`member`的`score`增加`increment`
5. 集合运算
   * `ZINCRBYSTORE destination numkeys key [key ...] [WEIGHTS weight] [SUM|MIN|MAX]`: 
     * 返回给定`key`的有序集合的交集
     * `destination`: 返回的交集结果放入此变量
     * `numkeys`: 给定`key`的个数
     * `key`: 给定的`key`, 可以为多个
     * `WEIGHTS`: 权重, 每个`score`传递给聚合函数之前都要先乘以该权重
     * `SUM|MIN|MAX`: 
       * `SUM`: 默认项, 将`member`的`score`之和作为该`member`的`score`值
       * `MIN/MAX`: 结果集为所有集合中元素最小或最大的元素
   * `ZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight] [SUM|MIN|MAX]`: 
     * 返回给定`key`的有序集合的并集
     * `destination`: 返回的并集结果放入此变量
     * `numkeys`: 给定`key`的个数
     * `key`: 给定的`key`, 可以为多个
6. 数量查询
   * `ZCARD key`: 返回`key`的有序集合的个数
   * `ZLEXCOUNT key min max`: 
     * 返回`score`范围在`min`、`max`之间的`member`数量
     * `min/max`: 可以用`-/+`代替, 默认表示`score`的最小值/最大值
     * 如果使用`member`替代`min/max`, 需要在`member`名称前加`[`. 如`[member`
7. 固定查询
   * `ZSCORE key member`: 返回`member`的`score`
   * `ZRANK key member`: 根据`score`从小到大的顺序, 返回`member`在`key`中的排名 
8. 范围查询
   * `ZCOUNT key min max`: 返回有序集`key`中, `score`在`min`和`max`之间的`member`
   * `ZRANGE key start stop [WITHSCORES]`: 从最高到最低返回`member`
     * 添加`WITHSCORES`可以将`score`一起返回
   * `ZREVRANK key member`: 从最低到最高返回`member`
   * `ZRANGEBYLEX key min max [LIMIT offset count]`: 按照`member`正序排列
   * `ZREVRANGEBYLEX key min max [LIMIT offset count]`: 按照`member`倒序排列
     * 返回指定区间内的`member`
   * `ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]`: 按照`score`正序(从小到大)排列
   * `ZREVRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]`: 按照`score`倒序(从大到小)排列
     * `min/max`默认值需使用`-inf/+inf`指定
9. `ZSCAN`: 参考`SCAN` 
# Streams
# Pub/Sub
# Geo
# HyperLogLog
# Connection
# Server
# Cluster
